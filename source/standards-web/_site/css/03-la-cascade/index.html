<p>La cascade est le mécanisme par lequel le navigateur va déterminer l’apparence d’un élément en agglomérant les <em>propriétés</em> CSS et les <em>valeurs</em> issues de plusieurs sélecteurs et de l’héritage de l’élément.</p>
<!-- Par défaut en CSS, c’est le dernier sélecteur qui a raison (le dernier dans le code) mais des sélecteurs différents peuvent avoir une priorité différente dans ce mécanisme de calcul, c’est **la spécificité**. -->
<h2>L’héritage</h2>
<h3>Les propriétés <em>héritées</em></h3>
<pre><code class="language-html">&lt;body&gt;
  &lt;article&gt;
    &lt;p&gt;
      &lt;span&gt;Iggy Pop, ami de &lt;strong&gt;David Bowie&lt;/strong&gt;&lt;/span&gt;
      &lt;i&gt;est un artiste américain du vingtième siècle.&lt;/i&gt;
    &lt;/p&gt;
  &lt;/article&gt;
&lt;/body&gt;
</code></pre>
<pre><code class="language-css">body {
  color: blue;
  border: 1px solid red;
}
</code></pre>
<p>Dans l’exemple ci-dessus, l’ensemble des éléments HTML sont bleus car la propriété <code>color</code> est <em>héritable</em>, cela signifie que la couleur est ici définie par la couleur appliquée à l’élément parent (<code>body</code>).</p>
<p>Cependant certaines propriétés ne sont pas héritées, c’est ce que l’on peut constater dans l’exemple ci-dessus, les éléments appartenant au <code>body</code> n’ont pas de bordure bleue.</p>
<p>Une liste <a href="https://gist.github.com/dcneiner/1137601">des propriétés <em>héritées</em></a>.</p>
<h3>Des éléments qui n’héritent pas</h3>
<p>En CSS certains éléments ne vont pas hériter de propriétés par d’autres éléments, les liens (<code>a</code>) et les <a href="https://developer.mozilla.org/fr/docs/Learn/Forms/Your_first_form">éléments de formulaire</a> n’héritent pas de toutes les propriétés.</p>
<pre><code class="language-html">&lt;p&gt;
  Lust for life
  &lt;a href=&quot;iggy.html&quot;&gt;Découvrir l’artiste&lt;/a&gt;
  &lt;span&gt;Iggy Pop&lt;/span&gt;
  &lt;button&gt;Voir la description&lt;/button&gt;
&lt;/p&gt;
</code></pre>
<pre><code class="language-css">body { color: red }
</code></pre>
<p>Ici le texte sera bien rouge à l’exception des liens et du bouton qui garderont leur couleur par défaut.</p>
<h4><em>Forcer</em> l’héritage</h4>
<pre><code class="language-css">body { color: red }
a, button { color: inherit }
</code></pre>
<p>Appliqué au code HTML précédent, ce code CSS va permettre aux liens et aux boutons d’être en rouge comme tous les autres éléments.</p>
<p>::: callout</p>
<h3>Une pratique du monde réel</h3>
<p><a href="https://necolas.github.io/normalize.css/">Une autre pratique</a> consiste à rendre l’héritage de certaines propriétés comme étant <em>autorisé</em> sur tous les éléments de la manière suivante :</p>
<pre><code class="language-css">* { font-family: inherit; }
body { font-family: monospace; }
</code></pre>
<p>Dans cet exemple tous les éléments faisant partie du document utiliseront une police à espacement fixe (<code>monospace</code>).</p>
<p>:::</p>
<h2>La spécificité</h2>
<p>En CSS, c’est la dernière déclaration qui sera appliquée mais tous les sélecteurs ne sont pas égaux face au <strong>calcul de spécificité</strong>.</p>
<h3>De quelle couleur est le paragraphe ?</h3>
<pre><code class="language-html">&lt;article id=&quot;art&quot;&gt;
  &lt;p class=&quot;question&quot; id=&quot;quest&quot;&gt;Je suis de quelle couleur ?&lt;/p&gt;
&lt;/article&gt;
</code></pre>
<pre><code class="language-css">p { color: blue }
p { color: rebeccapurple }
p { color: red }
</code></pre>
<p>On commence doucement, dans ce code l’élément <code>p</code> sera rouge, car <strong>en CSS, la dernière déclaration aura le fin mot si les sélecteurs sont de même types.</strong></p>
<h3>Corsons un peu les choses</h3>
<p>Avec le même extrait de code HTML, quelle est la couleur du paragraphe (<code>p</code>) ?</p>
<pre><code class="language-css">article { color: blue }
.question { color: rebeccapurple }
p { color: red }
</code></pre>
<p>Le paragraphe sera ici violet (<code>rebeccapurple</code>) car <strong>la sélection par <code>class</code> a plus de poids</strong> que la sélection par type.</p>
<p>La couleur appliquée par le sélecteur parent (<code>article</code>) est encore plus faible dans ce calcul.</p>
<h3>Encore un peu plus difficile ?</h3>
<pre><code class="language-css">article { color: blue }
#quest { color: orange }
.question { color: rebeccapurple }
p { color: red }
</code></pre>
<p>Comme dans ce code CSS nous effectuons une sélection par <code>id</code> (<code>#quest</code>), la couleur du paragraphe sera <code>orange</code> car le sélecteur d’<code>id</code> a plus de poids que la sélection par <code>class</code>.</p>
<h3>Un dernier pour la route</h3>
<p>La même question avec le même code HTML.</p>
<pre><code class="language-css">#art #quest { color: blue}
.question { color: rebeccapurple}
#quest { color: orange }
p { color: red }
</code></pre>
<p>Cette fois ci le paragraphe sera bleu, le premier sélecteur contient deux <code>id</code>, il gagne.</p>
<p>Si vous aimez jouer, voici un <a href="https://specificity.keegan.st/">calculateur de spécificité CSS</a>.</p>
<h2><code>!important</code></h2>
<p>Cette déclaration est une invention maléfique. Elle permet d’outre-passer la spécificité d’une déclaration en la priorisant.</p>
<p><strong>C’est vrai que c’était déjà trop simple.</strong></p>
<pre><code class="language-css">.question { color: rebeccapurple !important}
#quest { color: orange }
</code></pre>
<p>Le paragraphe sera orange, <code>!important</code> surpasse l’<code>id</code> dans cet exemple.</p>
<p>::: callout</p>
<p>La présence de cette déclaration est l’indice d’un code de <em>mauvaise qualité</em> et sûrement difficile à maintenir.</p>
<p>:::</p>
<h2>Éviter les crampes aux doigts et les mots de tête ?</h2>
<p>Dans le monde réel, <strong>on ne joue pas avec la spécificité</strong>, car le code est amené à être manipulé par différents intervenant(e)s de niveaux de connaissance différents du langage CSS.</p>
<p>Pour simplifier le travail de chacun :</p>
<ul>
<li>On n’utilise pas de sélection par <code>id</code>, sauf pour JavaScript;</li>
<li>Quelques sélections par type (la sélection d’éléments HTML) pour mettre à zéro certains éléments HTML de manière globale;</li>
<li>Le minimum de sélection hiérarchique et seulement sur des éléments <em>prévisibles</em>;</li>
<li>Des sélections par <code>class</code>;</li>
<li>Nous punissons les collègues qui utilisent <code>!important</code>;</li>
</ul>
<h2>Références</h2>
<ul>
<li>Une vidéo en anglais qui va en profondeur sur le <a href="https://www.youtube.com/watch?v=lrivS7K1LcY;">sujet de la cascade</a>;</li>
<li></li>
</ul>
